<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.js" integrity="sha512-Q4MHJkk3u8P63v1aX0I7jvo5AoMFi53HbxUBhURp8x7xrqD+nsHZrbBEQVObpqE+MAAVB/Ye9ZlKkM44a1q9WA==" crossorigin="anonymous"></script>
	<title>Waiypoint</title>
</head>
<style>
	a {
		display: inline-block;
		width: 50px;
		text-decoration: none;
	}

	nav,
	scroll-container {
		display: block;
		margin: 0 auto;
		text-align: center;
	}

	nav {
		background-color: white;
		width: 339px;
		padding: 5px;
		border: 1px solid black;
	}

	
	scroll-container {
		display: block;
		width: 350px;
		height: 600px;
		overflow-y: scroll;
		scroll-behavior: smooth;
	}


	scroll-page {
		display: flex;
		align-items: center;
		justify-content: center;
		height: 100%;
		font-size: 5em;
	}


	div{
		height: 100vh;
		display: flex;
		align-items: center
	}


	#overflow-scroll {
		overflow:scroll;
		height:300px;
		background:#aaa;
	}

	#context-example {
		background:#555;
		color:#fff;
		height:600px;
		margin-top:150px;
	}

</style>
</head>

<body>



	<nav>
		<a class="itemsNav" href="#page-1" data-id="1">1</a>
		<a class="itemsNav" href="#page-2" data-id="2">2</a>
		<a class="itemsNav" href="#page-3" data-id="3">3</a>
		<a class="itemsNav" href="#page-4" data-id="4">4</a>
		<a class="itemsNav" href="#page-5" data-id="5">5</a>
		<a class="itemsNav" href="#page-6" data-id="6">6</a>
	</nav>
	
	<scroll-container id="scroll">
		<div id="page-1" class="page" data-id="1" style="background-color: yellow;">
			<h1>1</h1>
		</div>
		<div id="page-2" class="page" data-id="2" style="background-color: red;">
			<h1>2</h1>
		</div>
		<div id="page-3" class="page" data-id="3" style="background-color: blue;">
			<h1>3</h1>
		</div>
		<div id="page-4" class="page" data-id="4" style="background-color: green;">
			<h1>4</h1>
		</div>
		<div id="page-5" class="page" data-id="5" style="background-color: orange">
			<h1>5</h1>
		</div>
		<div id="page-6" class="page" data-id="6" style="background-color: pink;">
			<h1>6</h1>
		</div>
	</scroll-container>

<!-- 
	<div id="overflow-scroll">
		<div id="context-example">I am a waypoint with a custom context, the "#overflow-scroll" div.</div>
	</div>
-->


<script>
	const page1 = document.getElementById('page-1');
	const page2 = document.getElementById('page-2');
	const page3 = document.getElementById('page-3');
	const scroll = document.getElementById('scroll');
	const boton = document.getElementById('boton');



		/*Con contexto*/
		// var waypoint1 = new Waypoint({
		// 	element: document.getElementById('context-example'),
		// 	handler: function() {
		// 		alert('Context example triggered')
		// 	},
		// 	context: document.getElementById('overflow-scroll')
		// })

		/*Recorriendo*/
		pages = document.getElementsByClassName('page');
		itemsNav = document.querySelectorAll('.itemsNav');
		console.log(pages);
		for (var i = 0; i < pages.length; i++) {
			new Waypoint({
				element: pages[i],
				handler: function() {
					console.log(this.element.innerHTML + ' hit');
					console.log(this.element.id+' contiene color: '+this.element.style.backgroundColor);

					for (var i = 0; i < itemsNav.length; i++) {
						if(itemsNav[i].dataset.id == this.element.dataset.id){
							itemsNav[i].style.backgroundColor = 'black';
							itemsNav[i].style.color = 'white';
						}else{
							itemsNav[i].style.backgroundColor = '';
							itemsNav[i].style.color = 'black';
						}
					}

				},
				context: document.getElementById('scroll'),
			})
		}

		/*Revisar la opcion 
			offset:  'bottom-in-view'
			*/

		/*
			detecta cuando el elemento choca con la parte superior

			offset: function(){
			return -this.element.clientHeight
		}
		*/

		/*Con offset se activa mas tarde el punto de quiebre*/
	</script>
</body>



</html>